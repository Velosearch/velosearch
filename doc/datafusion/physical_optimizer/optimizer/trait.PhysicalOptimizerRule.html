<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`PhysicalOptimizerRule` transforms one [‘ExecutionPlan’] into another which computes the same results, but in a potentially more efficient way."><title>PhysicalOptimizerRule in datafusion::physical_optimizer::optimizer - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="datafusion" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (a266f1199 2023-03-22)" data-search-js="search-a6dd7f063a44c279.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../../../static.files/storage-9184409068f70b79.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-f5a2577c5297a973.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../datafusion/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../datafusion/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">PhysicalOptimizerRule</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.name">name</a></li><li><a href="#tymethod.optimize">optimize</a></li><li><a href="#tymethod.schema_check">schema_check</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In datafusion::physical_optimizer::optimizer</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../index.html">datafusion</a>::<wbr><a href="../index.html">physical_optimizer</a>::<wbr><a href="index.html">optimizer</a>::<wbr><a class="trait" href="#">PhysicalOptimizerRule</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/datafusion/physical_optimizer/optimizer.rs.html#28-44">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait PhysicalOptimizerRule {
    // Required methods
    fn <a href="#tymethod.optimize" class="fn">optimize</a>(
        &amp;self,
        plan: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../physical_plan/trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a>&gt;,
        config: &amp;<a class="struct" href="../../config/struct.ConfigOptions.html" title="struct datafusion::config::ConfigOptions">ConfigOptions</a>
    ) -&gt; <a class="type" href="../../error/type.Result.html" title="type datafusion::error::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../physical_plan/trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.name" class="fn">name</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.schema_check" class="fn">schema_check</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>PhysicalOptimizerRule</code> transforms one [‘ExecutionPlan’] into another which
computes the same results, but in a potentially more efficient
way.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.optimize" class="method"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/optimizer.rs.html#30-34">source</a><h4 class="code-header">fn <a href="#tymethod.optimize" class="fn">optimize</a>(
    &amp;self,
    plan: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../physical_plan/trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a>&gt;,
    config: &amp;<a class="struct" href="../../config/struct.ConfigOptions.html" title="struct datafusion::config::ConfigOptions">ConfigOptions</a>
) -&gt; <a class="type" href="../../error/type.Result.html" title="type datafusion::error::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../physical_plan/trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Rewrite <code>plan</code> to an optimized form</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.name" class="method"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/optimizer.rs.html#37">source</a><h4 class="code-header">fn <a href="#tymethod.name" class="fn">name</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>A human readable name for this optimizer rule</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.schema_check" class="method"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/optimizer.rs.html#43">source</a><h4 class="code-header">fn <a href="#tymethod.schema_check" class="fn">schema_check</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>A flag to indicate whether the physical planner should valid the rule will not
change the schema of the plan after the rewriting.
Some of the optimization rules might change the nullable properties of the schema
and should disable the schema check.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-PhysicalOptimizerRule-for-AggregateStatistics" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/aggregate_statistics.rs.html#50-105">source</a><a href="#impl-PhysicalOptimizerRule-for-AggregateStatistics" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../aggregate_statistics/struct.AggregateStatistics.html" title="struct datafusion::physical_optimizer::aggregate_statistics::AggregateStatistics">AggregateStatistics</a></h3></section><section id="impl-PhysicalOptimizerRule-for-CoalesceBatches" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/coalesce_batches.rs.html#43-90">source</a><a href="#impl-PhysicalOptimizerRule-for-CoalesceBatches" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../coalesce_batches/struct.CoalesceBatches.html" title="struct datafusion::physical_optimizer::coalesce_batches::CoalesceBatches">CoalesceBatches</a></h3></section><section id="impl-PhysicalOptimizerRule-for-EnforceDistribution" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/dist_enforcement.rs.html#66-103">source</a><a href="#impl-PhysicalOptimizerRule-for-EnforceDistribution" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../dist_enforcement/struct.EnforceDistribution.html" title="struct datafusion::physical_optimizer::dist_enforcement::EnforceDistribution">EnforceDistribution</a></h3></section><section id="impl-PhysicalOptimizerRule-for-GlobalSortSelection" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/global_sort_selection.rs.html#47-89">source</a><a href="#impl-PhysicalOptimizerRule-for-GlobalSortSelection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../global_sort_selection/struct.GlobalSortSelection.html" title="struct datafusion::physical_optimizer::global_sort_selection::GlobalSortSelection">GlobalSortSelection</a></h3></section><section id="impl-PhysicalOptimizerRule-for-JoinSelection" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/join_selection.rs.html#211-278">source</a><a href="#impl-PhysicalOptimizerRule-for-JoinSelection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../join_selection/struct.JoinSelection.html" title="struct datafusion::physical_optimizer::join_selection::JoinSelection">JoinSelection</a></h3></section><section id="impl-PhysicalOptimizerRule-for-PipelineChecker" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/pipeline_checker.rs.html#41-59">source</a><a href="#impl-PhysicalOptimizerRule-for-PipelineChecker" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../pipeline_checker/struct.PipelineChecker.html" title="struct datafusion::physical_optimizer::pipeline_checker::PipelineChecker">PipelineChecker</a></h3></section><section id="impl-PhysicalOptimizerRule-for-PipelineFixer" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/pipeline_fixer.rs.html#53-78">source</a><a href="#impl-PhysicalOptimizerRule-for-PipelineFixer" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../pipeline_fixer/struct.PipelineFixer.html" title="struct datafusion::physical_optimizer::pipeline_fixer::PipelineFixer">PipelineFixer</a></h3></section><section id="impl-PhysicalOptimizerRule-for-Repartition" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/repartition.rs.html#267-303">source</a><a href="#impl-PhysicalOptimizerRule-for-Repartition" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../repartition/struct.Repartition.html" title="struct datafusion::physical_optimizer::repartition::Repartition">Repartition</a></h3></section><section id="impl-PhysicalOptimizerRule-for-EnforceSorting" class="impl"><a class="srclink rightside" href="../../../src/datafusion/physical_optimizer/sort_enforcement.rs.html#317-343">source</a><a href="#impl-PhysicalOptimizerRule-for-EnforceSorting" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PhysicalOptimizerRule.html" title="trait datafusion::physical_optimizer::optimizer::PhysicalOptimizerRule">PhysicalOptimizerRule</a> for <a class="struct" href="../sort_enforcement/struct.EnforceSorting.html" title="struct datafusion::physical_optimizer::sort_enforcement::EnforceSorting">EnforceSorting</a></h3></section><div class="docblock"><p>The boolean flag <code>repartition_sorts</code> defined in the config indicates
whether we elect to transform CoalescePartitionsExec + SortExec cascades
into SortExec + SortPreservingMergeExec cascades, which enables us to
perform sorting in parallel.</p>
</div></div><script src="../../../implementors/datafusion/physical_optimizer/optimizer/trait.PhysicalOptimizerRule.js" async></script></section></div></main></body></html>