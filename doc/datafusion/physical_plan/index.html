<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Traits for physical query plan, supporting parallel execution for partitioned relations."><title>datafusion::physical_plan - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="datafusion" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (a266f1199 2023-03-22)" data-search-js="search-a6dd7f063a44c279.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../../static.files/storage-9184409068f70b79.js"></script><script defer src="../../static.files/main-f5a2577c5297a973.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../datafusion/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../datafusion/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module physical_plan</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">datafusion</a>::<wbr><a class="mod" href="#">physical_plan</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/datafusion/physical_plan/mod.rs.html#18-768">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Traits for physical query plan, supporting parallel execution for partitioned relations.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.Metric"><code>pub use self::metrics::<a class="struct" href="metrics/struct.Metric.html" title="struct datafusion::physical_plan::metrics::Metric">Metric</a>;</code></div></li><li><div class="item-name" id="reexport.DisplayFormatType"><code>pub use display::<a class="enum" href="display/enum.DisplayFormatType.html" title="enum datafusion::physical_plan::display::DisplayFormatType">DisplayFormatType</a>;</code></div></li><li><div class="item-name" id="reexport.PhysicalPlanner"><code>pub use self::planner::<a class="trait" href="planner/trait.PhysicalPlanner.html" title="trait datafusion::physical_plan::planner::PhysicalPlanner">PhysicalPlanner</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="aggregates/index.html" title="mod datafusion::physical_plan::aggregates">aggregates</a></div><div class="desc docblock-short">Aggregates functionalities</div></li><li><div class="item-name"><a class="mod" href="analyze/index.html" title="mod datafusion::physical_plan::analyze">analyze</a></div><div class="desc docblock-short">Defines the ANALYZE operator</div></li><li><div class="item-name"><a class="mod" href="boolean/index.html" title="mod datafusion::physical_plan::boolean">boolean</a></div><div class="desc docblock-short">BooleanExec evaluates a boolean_query predicate against all input batches to determine
which rows to include in its output batches</div></li><li><div class="item-name"><a class="mod" href="coalesce_batches/index.html" title="mod datafusion::physical_plan::coalesce_batches">coalesce_batches</a></div><div class="desc docblock-short">CoalesceBatchesExec combines small batches into larger batches for more efficient use of
vectorized processing by upstream operators.</div></li><li><div class="item-name"><a class="mod" href="coalesce_partitions/index.html" title="mod datafusion::physical_plan::coalesce_partitions">coalesce_partitions</a></div><div class="desc docblock-short">Defines the merge plan for executing partitions in parallel and then merging the results
into a single partition</div></li><li><div class="item-name"><a class="mod" href="common/index.html" title="mod datafusion::physical_plan::common">common</a></div><div class="desc docblock-short">Defines common code used in execution plans</div></li><li><div class="item-name"><a class="mod" href="display/index.html" title="mod datafusion::physical_plan::display">display</a></div><div class="desc docblock-short">Implementation of physical plan display. See
<a href="fn.displayable.html" title="fn datafusion::physical_plan::displayable"><code>crate::physical_plan::displayable</code></a> for examples of how to
format</div></li><li><div class="item-name"><a class="mod" href="empty/index.html" title="mod datafusion::physical_plan::empty">empty</a></div><div class="desc docblock-short">EmptyRelation execution plan</div></li><li><div class="item-name"><a class="mod" href="explain/index.html" title="mod datafusion::physical_plan::explain">explain</a></div><div class="desc docblock-short">Defines the EXPLAIN operator</div></li><li><div class="item-name"><a class="mod" href="expressions/index.html" title="mod datafusion::physical_plan::expressions">expressions</a></div><div class="desc docblock-short">Defines physical expressions that can evaluated at runtime during query execution</div></li><li><div class="item-name"><a class="mod" href="file_format/index.html" title="mod datafusion::physical_plan::file_format">file_format</a></div><div class="desc docblock-short">Execution plans that read file formats</div></li><li><div class="item-name"><a class="mod" href="filter/index.html" title="mod datafusion::physical_plan::filter">filter</a></div><div class="desc docblock-short">FilterExec evaluates a boolean predicate against all input batches to determine which rows to
include in its output batches.</div></li><li><div class="item-name"><a class="mod" href="functions/index.html" title="mod datafusion::physical_plan::functions">functions</a></div><div class="desc docblock-short">Declaration of built-in (scalar) functions.
This module contains built-in functions’ enumeration and metadata.</div></li><li><div class="item-name"><a class="mod" href="hash_utils/index.html" title="mod datafusion::physical_plan::hash_utils">hash_utils</a></div><div class="desc docblock-short">Functionality used both on logical and physical plans</div></li><li><div class="item-name"><a class="mod" href="joins/index.html" title="mod datafusion::physical_plan::joins">joins</a></div><div class="desc docblock-short">DataFusion Join implementations</div></li><li><div class="item-name"><a class="mod" href="limit/index.html" title="mod datafusion::physical_plan::limit">limit</a></div><div class="desc docblock-short">Defines the LIMIT plan</div></li><li><div class="item-name"><a class="mod" href="memory/index.html" title="mod datafusion::physical_plan::memory">memory</a></div><div class="desc docblock-short">Execution plan for reading in-memory batches of data</div></li><li><div class="item-name"><a class="mod" href="metrics/index.html" title="mod datafusion::physical_plan::metrics">metrics</a></div><div class="desc docblock-short">Metrics for recording information about execution</div></li><li><div class="item-name"><a class="mod" href="planner/index.html" title="mod datafusion::physical_plan::planner">planner</a></div><div class="desc docblock-short">Physical query planner</div></li><li><div class="item-name"><a class="mod" href="projection/index.html" title="mod datafusion::physical_plan::projection">projection</a></div><div class="desc docblock-short">Defines the projection execution plan. A projection determines which columns or expressions
are returned from a query. The SQL statement <code>SELECT a, b, a+b FROM t1</code> is an example
of a projection on table <code>t1</code> where the expressions <code>a</code>, <code>b</code>, and <code>a+b</code> are the
projection expressions. <code>SELECT</code> without <code>FROM</code> will only evaluate expressions.</div></li><li><div class="item-name"><a class="mod" href="repartition/index.html" title="mod datafusion::physical_plan::repartition">repartition</a></div><div class="desc docblock-short">The repartition operator maps N input partitions to M output partitions based on a
partitioning scheme.</div></li><li><div class="item-name"><a class="mod" href="rewrite/index.html" title="mod datafusion::physical_plan::rewrite">rewrite</a></div><div class="desc docblock-short">Trait to make Executionplan rewritable</div></li><li><div class="item-name"><a class="mod" href="sorts/index.html" title="mod datafusion::physical_plan::sorts">sorts</a></div><div class="desc docblock-short">Sort functionalities</div></li><li><div class="item-name"><a class="mod" href="stream/index.html" title="mod datafusion::physical_plan::stream">stream</a></div><div class="desc docblock-short">Stream wrappers for physical operators</div></li><li><div class="item-name"><a class="mod" href="streaming/index.html" title="mod datafusion::physical_plan::streaming">streaming</a></div><div class="desc docblock-short">Execution plan for streaming <a href="../datasource/streaming/trait.PartitionStream.html" title="trait datafusion::datasource::streaming::PartitionStream"><code>PartitionStream</code></a></div></li><li><div class="item-name"><a class="mod" href="type_coercion/index.html" title="mod datafusion::physical_plan::type_coercion">type_coercion</a></div><div class="desc docblock-short">Type coercion rules for functions with multiple valid signatures</div></li><li><div class="item-name"><a class="mod" href="udaf/index.html" title="mod datafusion::physical_plan::udaf">udaf</a></div><div class="desc docblock-short">This module contains functions and structs supporting user-defined aggregate functions.</div></li><li><div class="item-name"><a class="mod" href="udf/index.html" title="mod datafusion::physical_plan::udf">udf</a></div><div class="desc docblock-short">UDF support</div></li><li><div class="item-name"><a class="mod" href="union/index.html" title="mod datafusion::physical_plan::union">union</a></div><div class="desc docblock-short">The Union operator combines multiple inputs with the same schema</div></li><li><div class="item-name"><a class="mod" href="unnest/index.html" title="mod datafusion::physical_plan::unnest">unnest</a></div><div class="desc docblock-short">Defines the unnest column plan for unnesting values in a column that contains a list
type, conceptually is like joining each row with all the values in the list column.</div></li><li><div class="item-name"><a class="mod" href="values/index.html" title="mod datafusion::physical_plan::values">values</a></div><div class="desc docblock-short">Values execution plan</div></li><li><div class="item-name"><a class="mod" href="windows/index.html" title="mod datafusion::physical_plan::windows">windows</a></div><div class="desc docblock-short">Physical expressions for window functions</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ColumnStatistics.html" title="struct datafusion::physical_plan::ColumnStatistics">ColumnStatistics</a></div><div class="desc docblock-short">Statistics for a column within a relation</div></li><li><div class="item-name"><a class="struct" href="struct.EmptyRecordBatchStream.html" title="struct datafusion::physical_plan::EmptyRecordBatchStream">EmptyRecordBatchStream</a></div><div class="desc docblock-short">EmptyRecordBatchStream can be used to create a RecordBatchStream
that will produce no results</div></li><li><div class="item-name"><a class="struct" href="struct.Statistics.html" title="struct datafusion::physical_plan::Statistics">Statistics</a></div><div class="desc docblock-short">Statistics for a relation
Fields are optional and can be inexact because the sources
sometimes provide approximate estimates for performance reasons
and the transformations output are not always predictable.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ColumnarValue.html" title="enum datafusion::physical_plan::ColumnarValue">ColumnarValue</a></div><div class="desc docblock-short">Represents the result of evaluating an expression: either a single
<code>ScalarValue</code> or an <a href="../../arrow_array/array/type.ArrayRef.html" title="type arrow_array::array::ArrayRef"><code>ArrayRef</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.Distribution.html" title="enum datafusion::physical_plan::Distribution">Distribution</a></div><div class="desc docblock-short">Distribution schemes</div></li><li><div class="item-name"><a class="enum" href="enum.Partitioning.html" title="enum datafusion::physical_plan::Partitioning">Partitioning</a></div><div class="desc docblock-short">Partitioning schemes supported by operators.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Accumulator.html" title="trait datafusion::physical_plan::Accumulator">Accumulator</a></div><div class="desc docblock-short">An accumulator represents a stateful object that lives throughout the evaluation of multiple rows and
generically accumulates values.</div></li><li><div class="item-name"><a class="trait" href="trait.AggregateExpr.html" title="trait datafusion::physical_plan::AggregateExpr">AggregateExpr</a></div><div class="desc docblock-short">An aggregate expression that:</div></li><li><div class="item-name"><a class="trait" href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a></div><div class="desc docblock-short"><code>ExecutionPlan</code> represent nodes in the DataFusion Physical Plan.</div></li><li><div class="item-name"><a class="trait" href="trait.ExecutionPlanVisitor.html" title="trait datafusion::physical_plan::ExecutionPlanVisitor">ExecutionPlanVisitor</a></div><div class="desc docblock-short">Trait that implements the <a href="https://en.wikipedia.org/wiki/Visitor_pattern">Visitor
pattern</a> for a
depth first walk of <code>ExecutionPlan</code> nodes. <code>pre_visit</code> is called
before any children are visited, and then <code>post_visit</code> is called
after all children have been visited.
To use, define a struct that implements this trait and then invoke
[‘accept’].</div></li><li><div class="item-name"><a class="trait" href="trait.PhysicalExpr.html" title="trait datafusion::physical_plan::PhysicalExpr">PhysicalExpr</a></div><div class="desc docblock-short">Expression that can be evaluated against a RecordBatch
A Physical expression knows its type, nullability and how to evaluate itself.</div></li><li><div class="item-name"><a class="trait" href="trait.RecordBatchStream.html" title="trait datafusion::physical_plan::RecordBatchStream">RecordBatchStream</a></div><div class="desc docblock-short">Trait for types that stream <a href="../../arrow_array/record_batch/struct.RecordBatch.html" title="struct arrow_array::record_batch::RecordBatch">arrow::record_batch::RecordBatch</a></div></li><li><div class="item-name"><a class="trait" href="trait.RowAccumulator.html" title="trait datafusion::physical_plan::RowAccumulator">RowAccumulator</a></div><div class="desc docblock-short">Row-based accumulator where the internal aggregate state(s) are stored using row format.</div></li><li><div class="item-name"><a class="trait" href="trait.WindowExpr.html" title="trait datafusion::physical_plan::WindowExpr">WindowExpr</a></div><div class="desc docblock-short">A window expression that:</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.accept.html" title="fn datafusion::physical_plan::accept">accept</a></div><div class="desc docblock-short">Visit all children of this plan, according to the order defined on <code>ExecutionPlanVisitor</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.collect.html" title="fn datafusion::physical_plan::collect">collect</a></div><div class="desc docblock-short">Execute the <a href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a> and collect the results in memory</div></li><li><div class="item-name"><a class="fn" href="fn.collect_partitioned.html" title="fn datafusion::physical_plan::collect_partitioned">collect_partitioned</a></div><div class="desc docblock-short">Execute the <a href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a> and collect the results in memory</div></li><li><div class="item-name"><a class="fn" href="fn.displayable.html" title="fn datafusion::physical_plan::displayable">displayable</a></div><div class="desc docblock-short">Return a <a href="display/struct.DisplayableExecutionPlan.html" title="struct datafusion::physical_plan::display::DisplayableExecutionPlan">wrapper</a> around an
<a href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan"><code>ExecutionPlan</code></a> which can be displayed in various easier to
understand ways.</div></li><li><div class="item-name"><a class="fn" href="fn.execute_stream.html" title="fn datafusion::physical_plan::execute_stream">execute_stream</a></div><div class="desc docblock-short">Execute the <a href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a> and return a single stream of results</div></li><li><div class="item-name"><a class="fn" href="fn.execute_stream_partitioned.html" title="fn datafusion::physical_plan::execute_stream_partitioned">execute_stream_partitioned</a></div><div class="desc docblock-short">Execute the <a href="trait.ExecutionPlan.html" title="trait datafusion::physical_plan::ExecutionPlan">ExecutionPlan</a> and return a vec with one stream per output partition</div></li><li><div class="item-name"><a class="fn" href="fn.need_data_exchange.html" title="fn datafusion::physical_plan::need_data_exchange">need_data_exchange</a></div><div class="desc docblock-short">Indicate whether a data exchange is needed for the input of <code>plan</code>, which will be very helpful
especially for the distributed engine to judge whether need to deal with shuffling.
Currently there are 3 kinds of execution plan which needs data exchange
1. RepartitionExec for changing the partition number between two operators
2. CoalescePartitionsExec for collapsing all of the partitions into one without ordering guarantee
3. SortPreservingMergeExec for collapsing all of the sorted partitions into one with ordering guarantee</div></li><li><div class="item-name"><a class="fn" href="fn.project_schema.html" title="fn datafusion::physical_plan::project_schema">project_schema</a></div><div class="desc docblock-short">Applies an optional projection to a <a href="../../arrow_schema/schema/type.SchemaRef.html" title="type arrow_schema::schema::SchemaRef"><code>SchemaRef</code></a>, returning the
projected schema</div></li><li><div class="item-name"><a class="fn" href="fn.visit_execution_plan.html" title="fn datafusion::physical_plan::visit_execution_plan">visit_execution_plan</a></div><div class="desc docblock-short">Recursively calls <code>pre_visit</code> and <code>post_visit</code> for this node and
all of its children, as described on <a href="trait.ExecutionPlanVisitor.html" title="trait datafusion::physical_plan::ExecutionPlanVisitor"><code>ExecutionPlanVisitor</code></a></div></li><li><div class="item-name"><a class="fn" href="fn.with_new_children_if_necessary.html" title="fn datafusion::physical_plan::with_new_children_if_necessary">with_new_children_if_necessary</a></div><div class="desc docblock-short">Returns a copy of this plan if we change any child according to the pointer comparison.
The size of <code>children</code> must be equal to the size of <code>ExecutionPlan::children()</code>.
Allow the vtable address comparisons for ExecutionPlan Trait Objects，it is harmless even
in the case of ‘false-native’.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.SendableRecordBatchStream.html" title="type datafusion::physical_plan::SendableRecordBatchStream">SendableRecordBatchStream</a></div><div class="desc docblock-short">Trait for a stream of record batches.</div></li></ul></section></div></main></body></html>